# Comparing `tmp/odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.0.3-py3-none-any.whl.zip` & `tmp/odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,22 +1,22 @@
-Zip file size: 24380 bytes, number of entries: 20
--rw-r--r--  2.0 unx     3476 b- defN 23-Apr-05 07:10 odoo/addons/sale_coupon_delivery_auto_refresh/README.rst
--rw-r--r--  2.0 unx       21 b- defN 23-Apr-05 07:09 odoo/addons/sale_coupon_delivery_auto_refresh/__init__.py
--rw-r--r--  2.0 unx      528 b- defN 23-Apr-05 07:09 odoo/addons/sale_coupon_delivery_auto_refresh/__manifest__.py
--rw-r--r--  2.0 unx      864 b- defN 23-Apr-05 07:09 odoo/addons/sale_coupon_delivery_auto_refresh/i18n/it.po
--rw-r--r--  2.0 unx      530 b- defN 23-Apr-05 07:09 odoo/addons/sale_coupon_delivery_auto_refresh/i18n/sale_coupon_delivery_auto_refresh.pot
--rw-r--r--  2.0 unx       25 b- defN 23-Apr-05 07:09 odoo/addons/sale_coupon_delivery_auto_refresh/models/__init__.py
--rw-r--r--  2.0 unx      890 b- defN 23-Apr-05 07:09 odoo/addons/sale_coupon_delivery_auto_refresh/models/sale_order.py
--rw-r--r--  2.0 unx       31 b- defN 23-Apr-05 07:09 odoo/addons/sale_coupon_delivery_auto_refresh/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx      131 b- defN 23-Apr-05 07:09 odoo/addons/sale_coupon_delivery_auto_refresh/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      381 b- defN 23-Apr-05 07:09 odoo/addons/sale_coupon_delivery_auto_refresh/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx       66 b- defN 23-Apr-05 07:09 odoo/addons/sale_coupon_delivery_auto_refresh/readme/HISTORY.rst
--rw-r--r--  2.0 unx      103 b- defN 23-Apr-05 07:09 odoo/addons/sale_coupon_delivery_auto_refresh/readme/USAGE.rst
--rw-r--r--  2.0 unx     9455 b- defN 23-Apr-05 07:09 odoo/addons/sale_coupon_delivery_auto_refresh/static/description/icon.png
--rw-r--r--  2.0 unx    12805 b- defN 23-Apr-05 07:10 odoo/addons/sale_coupon_delivery_auto_refresh/static/description/index.html
--rw-r--r--  2.0 unx       53 b- defN 23-Apr-05 07:09 odoo/addons/sale_coupon_delivery_auto_refresh/tests/__init__.py
--rw-r--r--  2.0 unx     2551 b- defN 23-Apr-05 07:09 odoo/addons/sale_coupon_delivery_auto_refresh/tests/test_sale_coupon_delivery_auto_refresh.py
--rw-r--r--  2.0 unx     4218 b- defN 23-Apr-05 07:10 odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.0.3.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-05 07:10 odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.0.3.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Apr-05 07:10 odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.0.3.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2450 b- defN 23-Apr-05 07:10 odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.0.3.dist-info/RECORD
-20 files, 38675 bytes uncompressed, 20068 bytes compressed:  48.1%
+Zip file size: 24329 bytes, number of entries: 20
+-rw-r--r--  2.0 unx     3492 b- defN 23-Jul-04 06:34 odoo/addons/sale_coupon_delivery_auto_refresh/README.rst
+-rw-r--r--  2.0 unx       21 b- defN 23-Jul-04 06:34 odoo/addons/sale_coupon_delivery_auto_refresh/__init__.py
+-rw-r--r--  2.0 unx      528 b- defN 23-Jul-04 06:34 odoo/addons/sale_coupon_delivery_auto_refresh/__manifest__.py
+-rw-r--r--  2.0 unx      864 b- defN 23-Jul-04 06:34 odoo/addons/sale_coupon_delivery_auto_refresh/i18n/it.po
+-rw-r--r--  2.0 unx      530 b- defN 23-Jul-04 06:34 odoo/addons/sale_coupon_delivery_auto_refresh/i18n/sale_coupon_delivery_auto_refresh.pot
+-rw-r--r--  2.0 unx       25 b- defN 23-Jul-04 06:34 odoo/addons/sale_coupon_delivery_auto_refresh/models/__init__.py
+-rw-r--r--  2.0 unx      562 b- defN 23-Jul-04 06:34 odoo/addons/sale_coupon_delivery_auto_refresh/models/sale_order.py
+-rw-r--r--  2.0 unx       31 b- defN 23-Jul-04 06:34 odoo/addons/sale_coupon_delivery_auto_refresh/readme/CONFIGURE.rst
+-rw-r--r--  2.0 unx      147 b- defN 23-Jul-04 06:34 odoo/addons/sale_coupon_delivery_auto_refresh/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      381 b- defN 23-Jul-04 06:34 odoo/addons/sale_coupon_delivery_auto_refresh/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx       66 b- defN 23-Jul-04 06:34 odoo/addons/sale_coupon_delivery_auto_refresh/readme/HISTORY.rst
+-rw-r--r--  2.0 unx      103 b- defN 23-Jul-04 06:34 odoo/addons/sale_coupon_delivery_auto_refresh/readme/USAGE.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jul-04 06:34 odoo/addons/sale_coupon_delivery_auto_refresh/static/description/icon.png
+-rw-r--r--  2.0 unx    12826 b- defN 23-Jul-04 06:34 odoo/addons/sale_coupon_delivery_auto_refresh/static/description/index.html
+-rw-r--r--  2.0 unx       53 b- defN 23-Jul-04 06:34 odoo/addons/sale_coupon_delivery_auto_refresh/tests/__init__.py
+-rw-r--r--  2.0 unx     2551 b- defN 23-Jul-04 06:34 odoo/addons/sale_coupon_delivery_auto_refresh/tests/test_sale_coupon_delivery_auto_refresh.py
+-rw-r--r--  2.0 unx     4232 b- defN 23-Jul-04 06:34 odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.1.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-04 06:34 odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jul-04 06:34 odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.1.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2442 b- defN 23-Jul-04 06:34 odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.1.dist-info/RECORD
+20 files, 38406 bytes uncompressed, 20033 bytes compressed:  47.8%
```

## zipnote {}

```diff
@@ -42,20 +42,20 @@
 
 Filename: odoo/addons/sale_coupon_delivery_auto_refresh/tests/__init__.py
 Comment: 
 
 Filename: odoo/addons/sale_coupon_delivery_auto_refresh/tests/test_sale_coupon_delivery_auto_refresh.py
 Comment: 
 
-Filename: odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.0.3.dist-info/METADATA
+Filename: odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.1.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.0.3.dist-info/WHEEL
+Filename: odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.1.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.0.3.dist-info/top_level.txt
+Filename: odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.1.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.0.3.dist-info/RECORD
+Filename: odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/sale_coupon_delivery_auto_refresh/README.rst

```diff
@@ -82,14 +82,15 @@
 ~~~~~~~~~~~~
 
 * Ooops404 <https://www.ooops404.com/>
 * Cetmix <https://cetmix.com/>
 * `Tecnativa <https://www.tecnativa.com>`_
 
   * Pilar Vargas
+  * David Vidal
 
 Maintainers
 ~~~~~~~~~~~
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
```

## odoo/addons/sale_coupon_delivery_auto_refresh/__manifest__.py

```diff
@@ -1,10 +1,10 @@
 {
     "name": "Auto Refresh Coupons with Delivery line",
-    "version": "15.0.1.0.0",
+    "version": "15.0.1.0.1",
     "summary": "Allows to auto-apply the coupons after adding delivery line",
     "author": "Ooops404, Cetmix, , Odoo Community Association (OCA)",
     "contributors": "Ooops404, Cetmix",
     "license": "AGPL-3",
     "category": "Sale",
     "website": "https://github.com/OCA/sale-promotion",
     "depends": ["sale_coupon_auto_refresh", "delivery_auto_refresh"],
```

## odoo/addons/sale_coupon_delivery_auto_refresh/models/sale_order.py

```diff
@@ -1,26 +1,16 @@
 from odoo import models
 
 
 class SaleOrder(models.Model):
     _inherit = "sale.order"
 
     def _auto_refresh_delivery(self):
-        """
-        Override to change context value to refresh coupons after creation
-        delivery line
-        """
-        self = self.with_context(
-            skip_auto_refresh_coupons=False, auto_refresh_delivery=True
-        )
+        """When refreshing delivery lines skip coupons auto compute"""
+        self = self.with_context(skip_auto_refresh_coupons=True)
         return super(SaleOrder, self)._auto_refresh_delivery()
 
-    def _create_delivery_line(self, carrier, price_unit):
-        """
-        Override to refresh coupons after creation delivery line
-        """
-        if self._check_skip_refresh():
-            return super()._create_delivery_line(carrier, price_unit)
-        self_ctx = self.with_context(skip_auto_refresh_coupons=True)
-        sol = super(SaleOrder, self_ctx)._create_delivery_line(carrier, price_unit)
-        self._auto_refresh_coupons()
-        return sol
+    def recompute_coupon_lines(self):
+        """When refreshing promotions skip delivery lines auto compute"""
+        return super(
+            SaleOrder, self.with_context(auto_refresh_delivery=True)
+        ).recompute_coupon_lines()
```

## odoo/addons/sale_coupon_delivery_auto_refresh/readme/CONTRIBUTORS.rst

```diff
@@ -1,5 +1,6 @@
 * Ooops404 <https://www.ooops404.com/>
 * Cetmix <https://cetmix.com/>
 * `Tecnativa <https://www.tecnativa.com>`_
 
   * Pilar Vargas
+  * David Vidal
```

## odoo/addons/sale_coupon_delivery_auto_refresh/static/description/index.html

### odoo/addons/sale_coupon_delivery_auto_refresh/static/description/index.html

```diff
@@ -474,14 +474,15 @@
             <a class="reference external" href="https://cetmix.com/">https://cetmix.com/</a>
             &gt;
           </li>
           <li>
             <a class="reference external" href="https://www.tecnativa.com">Tecnativa</a>
             <ul>
               <li>Pilar Vargas</li>
+              <li>David Vidal</li>
             </ul>
           </li>
         </ul>
       </div>
       <div class="section" id="maintainers">
         <h1>Maintainers</h1>
         <p>This module is maintained by the OCA.</p>
```

## Comparing `odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.0.3.dist-info/METADATA` & `odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.1.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo-addon-sale-coupon-delivery-auto-refresh
-Version: 15.0.1.0.0.3
+Version: 15.0.1.0.1
 Summary: Allows to auto-apply the coupons after adding delivery line
 Home-page: https://github.com/OCA/sale-promotion
 Author: Ooops404, Cetmix, , Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
@@ -100,14 +100,15 @@
 ~~~~~~~~~~~~
 
 * Ooops404 <https://www.ooops404.com/>
 * Cetmix <https://cetmix.com/>
 * `Tecnativa <https://www.tecnativa.com>`_
 
   * Pilar Vargas
+  * David Vidal
 
 Maintainers
 ~~~~~~~~~~~
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
```

## Comparing `odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.0.3.dist-info/RECORD` & `odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.1.dist-info/RECORD`

 * *Files 9% similar despite different names*

```diff
@@ -1,20 +1,20 @@
-odoo/addons/sale_coupon_delivery_auto_refresh/README.rst,sha256=-rwzsSUDuuZbYZzYQqEKr2P8BUjqiM2IuorBVcbutek,3476
+odoo/addons/sale_coupon_delivery_auto_refresh/README.rst,sha256=s0TCsdCxX-LCjQR_i8OSKeTDWxVhy_y6UJ7kRYQ8_Sk,3492
 odoo/addons/sale_coupon_delivery_auto_refresh/__init__.py,sha256=X9EJGOE2GtZbS0G82PtSXmWSZ_R8jEM0rlJTDliQjp4,21
-odoo/addons/sale_coupon_delivery_auto_refresh/__manifest__.py,sha256=pJqdZ080RktqILUEka4FR-UCjtuOAJ3aWiq61Ybaj0c,528
+odoo/addons/sale_coupon_delivery_auto_refresh/__manifest__.py,sha256=S_UHrJTUa9EeiXHRgWNXTnJJMfgbGCg9Kr2FkLHMH0w,528
 odoo/addons/sale_coupon_delivery_auto_refresh/i18n/it.po,sha256=wOjnD3Dd_M59vzaodvcDRPozQn7Kf5vxQpqnXLkrfyQ,864
 odoo/addons/sale_coupon_delivery_auto_refresh/i18n/sale_coupon_delivery_auto_refresh.pot,sha256=hETFIqsQnY08leD_z3xIazIC6GPqtsyjWiAcSTBXEFI,530
 odoo/addons/sale_coupon_delivery_auto_refresh/models/__init__.py,sha256=LsPoCIAYodIFzh85VEjY5GiuzDQDQpiF38txDw10qT0,25
-odoo/addons/sale_coupon_delivery_auto_refresh/models/sale_order.py,sha256=zKi-GghyxxqKbYymuHHc2O3SBe6qC2NAhh5ZNvNGPiI,890
+odoo/addons/sale_coupon_delivery_auto_refresh/models/sale_order.py,sha256=bzomQW8Vz0b0BmRnA7ERwUkZXnz4nYymMYo1Jky_d_g,562
 odoo/addons/sale_coupon_delivery_auto_refresh/readme/CONFIGURE.rst,sha256=i22YcDxhIhEQDY3kPsAYtRnzDWWEG1OSNXSmWO1NCjM,31
-odoo/addons/sale_coupon_delivery_auto_refresh/readme/CONTRIBUTORS.rst,sha256=hFyBuZZcFTNiMeSgOurIslwnsYyT54X4dj-g4uoVrq8,131
+odoo/addons/sale_coupon_delivery_auto_refresh/readme/CONTRIBUTORS.rst,sha256=xtsxv0J0yfhQAKzwDhlkJvvM37a183wdF0Y427maGCA,147
 odoo/addons/sale_coupon_delivery_auto_refresh/readme/DESCRIPTION.rst,sha256=b4aX6wzLtA-wKSzs3C7jgR7dxV0vK_PNS-BiX_z6Epg,381
 odoo/addons/sale_coupon_delivery_auto_refresh/readme/HISTORY.rst,sha256=X_SR-qzve0LX-rAdeRgVuF_IS1NcpJLQVLsZyXN2LAw,66
 odoo/addons/sale_coupon_delivery_auto_refresh/readme/USAGE.rst,sha256=TCF1fFM_Bs9RwNe_uc9Juu_8mgsLXCYHd_OwcGwa4HI,103
 odoo/addons/sale_coupon_delivery_auto_refresh/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
-odoo/addons/sale_coupon_delivery_auto_refresh/static/description/index.html,sha256=BaXDtiQxRJucOOR_yGgVeKi6jLgVLw8H8O4fyF1bxGw,12805
+odoo/addons/sale_coupon_delivery_auto_refresh/static/description/index.html,sha256=KTNXmv0x4H0c4MRDv14pPJpxG21G35j_VbijhanBunY,12826
 odoo/addons/sale_coupon_delivery_auto_refresh/tests/__init__.py,sha256=6lMTg8pCx5_-PqQEb7pm7t9bKjviiTy4Fr0NVv4-MCQ,53
 odoo/addons/sale_coupon_delivery_auto_refresh/tests/test_sale_coupon_delivery_auto_refresh.py,sha256=OO16zKU3K64Kp0IoC4VA00PX6IDbUIyoyaB_dUDOBUU,2551
-odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.0.3.dist-info/METADATA,sha256=1N-XMle-1cZ4JgEAXCDdI2GDjgqNR6DqTWacAwByxQA,4218
-odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.0.3.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.0.3.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.0.3.dist-info/RECORD,,
+odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.1.dist-info/METADATA,sha256=IEoxYoF87_5g6_LH4KNg-ll99zm9L5nqFiEDgvbbOis,4232
+odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.1.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_sale_coupon_delivery_auto_refresh-15.0.1.0.1.dist-info/RECORD,,
```

